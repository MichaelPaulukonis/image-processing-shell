<!-- Generated by SpecStory -->

<!-- vscode Session e9010b86-810c-4383-b74d-089577f584e5 (2025-01-02 04:21Z) -->

# Capturing parameters before taking actions in tool.sh (2025-01-02 04:21Z)

_**User**_

I need to fix tool.sh, so that all parameters are captured before actions are taken

---

_**Assistant**_

### Plan

1. Create a loop to capture all parameters and store them in variables.
2. After the loop, perform the actions based on the captured parameters.

### Code

```shellscript
debug() {
    echo TARG: $TARG
    echo DEST: $DEST
    echo NAME: $NAME
    echo ROOT: $ROOT
    echo PREFIX: $PREFIX
    echo SUFFIX: $SUFFIX
}

## MAIN

## Capture all parameters
while [ "$1" != "" ]; do
    case $1 in
        -s | --suffix )
            shift
            SUFFIX=$1
        ;;
        -p | --prefix )
            shift
            PREFIX=$1
        ;;
        -t | --target )
            shift
            TARG=$1
        ;;
        -d | --destination )
            shift
            DEST=$1
        ;;
        -n | --name )
            shift
            NAME=$1
        ;;
        -r | --root )
            shift
            ROOT=$1
        ;;
        *)
            echo "Invalid option: $1"
            exit 1
        ;;
    esac
    shift
done

## Perform actions based on captured parameters
# Example action
if [ -n "$SUFFIX" ]; then
    echo "Performing action with SUFFIX: $SUFFIX"
fi

if [ -n "$PREFIX" ]; then
    echo "Performing action with PREFIX: $PREFIX"
fi

# Add more actions as needed
```

This code captures all parameters first and then performs actions based on the captured parameters. Adjust the actions as needed for your specific use case.

---

_**User**_

There are command-line actions like "--video" or "--montage" that should only start AFTER all parameters have been captured. Can you make this work?

---

_**Assistant**_

### Plan

1. Capture all parameters first.
2. After capturing all parameters, perform the actions based on the captured parameters.

### Code

```shellscript
## MAIN

## Capture all parameters
while [ "$1" != "" ]; do
    case $1 in
        -g | --gridSize )
            shift
            GRIDSIZE=$1
        ;;
        -f | --fps )
            shift
            FPS=$1
        ;;
        -r | --resolution )
            shift
            RESOLUTION=$1
        ;;
        -v | --video )
            ACTION="video"
        ;;
        -m | --montage )
            ACTION="montage"
        ;;
        -w | --slice )
            ACTION="slice"
        ;;
        -w | --wombo )
            ACTION="wombo"
        ;;
        -t | --target )
            shift
            TARGET=$1
        ;;
        -d | --destination )
            shift
            DESTINATION=$1
        ;;
        -n | --name )
            shift
            NAME=$1
        ;;
        -p | --prefix )
            shift
            PREFIX=$1
        ;;
        *)
            echo "Invalid option: $1"
            exit 1
        ;;
    esac
    shift
done

## Perform actions based on captured parameters
case $ACTION in
    video)
        makevideos $TARGET $DESTINATION $NAME
    ;;
    montage)
        makeMontage $TARGET $DESTINATION $NAME
    ;;
    slice)
        sliceGrid $TARGET $DESTINATION $PREFIX
    ;;
    wombo)
        sliceWombo $TARGET $DESTINATION $PREFIX
    ;;
    *)
        echo "No valid action specified"
        exit 1
    ;;
esac
```

This code captures all parameters first and then performs the actions based on the captured parameters. Adjust the actions as needed for your specific use case.

---

